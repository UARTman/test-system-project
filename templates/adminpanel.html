{% extends "base.html" %}
{% block content %}
    <div id="add_test" class="right">
        <form  method="post" action="/add_test">
            <label>
                Name:
                <input type="text" name="test_name" required="required" >
            </label>
            <br>
            <label>
                Type:
                <select name="test_type" required>
                    {% for i in types %}
                        <option value="{{ i }}">{{ types[i] }}</option>
                    {% endfor %}
                </select>
            </label>
            <br>
            <input type="submit" name="sender" value="Add">
        </form>
    </div>
<table>
    <tr>
        <th> Id </th>
        <th> Name </th>
        <th> Type </th>
    </tr>
    {% for i in results %}
        <tr>
            <td><a href="/admin/test/{{ i.id }}">{{ i.id }}</a></td>
            <td>{{ i.name }}</td>
            <td>{{ types[i.type] }}</td>
            <td class="remove_button" style="color: red"> [x] </td>
        </tr>
    {% endfor %}
</table>
<script>
    $(function(){
        $( ".remove_button" ).click(function () {
            let a = $(this).prev().prev().prev().text();
            $.post("/remove_test", {test_id: a}, function() {location.reload()})
        })
    })
</script>
{% endblock %}