image:
  - Visual Studio 2015

install:
  - cmd: C:\Python37\python -m pip install nuitka
  - cmd: C:\Python37\python -m pip install -r requirements.txt

build_script:
  - cmd: C:\Python37\python -m nuitka --assume-yes-for-downloads --standalone --experimental=use-pefile wsgi.py

after_build:
  - ps: Compress-Archive -Path wsgi.dist -DestinationPath windows-x64-nuitka.zip


deploy:
  provider: GitHub
  auth_token:
    secure: y67JC/xi8UFlpAsoJIOp/wLmg/Ieo2OEwyZE/10lbvia9nWhHQ/
  on:
    branch: master                 # release from master branch only
    APPVEYOR_REPO_TAG: true        # deploy on tag push only
  artifact: windows-x64-nuitka.zip

